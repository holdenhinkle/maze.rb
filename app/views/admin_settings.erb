<nav aria-label="breadcrumb" class="mt-3">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/admin">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Settings</li>
  </ol>
</nav>
<header>
  <h1>Settings</h1>
</header>
<section>
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link active" id="general-tab" data-toggle="tab" href="#general" role="tab" aria-controls="general" aria-selected="true">General</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="simple-tab" data-toggle="tab" href="#simple" role="tab" aria-controls="simple" aria-selected="false">Simple Mazes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="bridge-tab" data-toggle="tab" href="#bridge" role="tab" aria-controls="bridge" aria-selected="false">Bridge Mazes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="tunnel-tab" data-toggle="tab" href="#tunnel" role="tab" aria-controls="tunnel" aria-selected="false">Tunnel Mazes</a>
    </li>
      <li class="nav-item">
      <a class="nav-link" id="loop-tab" data-toggle="tab" href="#loop" role="tab" aria-controls="loop" aria-selected="false">Loop Mazes</a>
    </li>
      <li class="nav-item">
      <a class="nav-link" id="mashup-tab" data-toggle="tab" href="#mashup" role="tab" aria-controls="mashup" aria-selected="false">Mashup Mazes</a>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
      <form action="/admin/settings" method="post">
        <p class="h4 mt-4">Background Workers</p>
        <div class="form-group">
          <label for="number_of_threads"><strong>Number of Threads</strong></label>
            <p>If you change the number of threads, all current jobs will be killed and will start over.</p>
            <select class="custom-select" name="number_of_threads" id="number_of_threads">
              <% @min_max_threads[:min].upto(@min_max_threads[:max]) do |number| %>
                <% if number == @number_of_threads %>
                  <option value="<%= number %>" selected="selected"><%= number %></option>
                  <% next %>
                <% end %>
                <option value="<%= number %>"><%= number %></option>
              <% end %>
            </select>
          </label>
        </div>
        <button type="submit" class="btn btn-primary mt-4">Save General Settings</button>
      </form>
    </div>
    
    <% @maze_formula_constraints.each do |maze_formula_name, maze_formula_values| %>
      <div class="tab-pane fade" id="<%= maze_formula_name %>" role="tabpanel" aria-labelledby="<%= maze_formula_name %>-tab">
        <form action="/admin/settings" method="post">
          <div class="form-group">


            <p class="h4 mt-4">Dimensions</p>
            <div class="row">
              <div class="form-group col-md-4">

                <% maze_formula_values.each do |x| %>
                  <%# <% binding.pry %> %>
                  <label for="x">Maze <strong>Width</strong> (x-value)</label> <a tabindex="0" role="button" data-toggle="popover" data-trigger="focus" data-html="true" title="" data-content=""></i></a>
                  <% if session["x_validation_css"] %>
                    <input type="number" class="form-control <%= session.delete("x_validation_css") %>" name="x" id="x" aria-describedby="x-help" value="">
                  <% else %>
                    <input type="number" class="form-control" name="x" id="x" aria-describedby="x-help" placeholder="<%= x["integer_value"] %>">
                  <% end %>
                  <% if session["x_validation_feedback"] %>
                    <div class="<%= session.delete("x_validation_feedback_css") %>">
                      <%= session.delete("x_validation_feedback") %>
                    </div>
                  <% end %>
                <% end %>
              </div>


              <div class="form-group col-md-4">
                <% maze_formula_values.each do |y| %>
                  <%# <% binding.pry %> %>
                  <label for="y">Maze <strong>Height</strong> (y-value)</label> <a tabindex="0" role="button" data-toggle="popover" data-trigger="focus" data-html="true" title="" data-content=""><i class="fas fa-question-circle"></i></a>
                  <% if session["y_validation_css"] %>
                    <input type="number" class="form-control <%= session.delete("y_validation_css") %>" name="y" id="y" aria-describedby="y-help" value="">
                  <% else %>
                    <input type="number" class="form-control" name="y" id="y" aria-describedby="y-help" placeholder="<%= y["integer_value"] %>">
                  <% end %>
                  <% if session["y_validation_feedback"] %>
                    <div class="<%= session.delete("y_validation_feedback_css") %>">
                      <%= session.delete("y_validation_feedback") %>
                    </div>
                  <% end %>
                <% end %>
              </div>
            </div>




        <%# <% maze_formula_values.each do |values| %> %>
          <%# <% binding.pry %> %>
        <%# <% end %> %>
      </div>
    <% end %>
  </div>
</section>